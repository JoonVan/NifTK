<statemachine>
  <state name="start" startstate="true">
    <transition event_class="InteractionPositionEvent" event_variant="AddPoint" target="start">
      <action name="update"/>
      <action name="addpoint"/>
      <action name="unselectAll"/>
    </transition>
    <transition event_class="MouseMoveEvent" event_variant="CheckSelected" target="pointSelected">
      <condition name="isoverpoint"/>
      <action name="update"/>
      <action name="selectpoint"/>
    </transition>
    <transition event_class="InteractionKeyEvent" event_variant="Abort" target="start">
      <action name="abort"/>
      <action name="unselectAll"/>
    </transition>
  </state>
  <state name="pointSelected">
    <transition event_class="MouseMoveEvent" event_variant="CheckSelected" target="start">
      <condition name="isoverpoint" inverted="true"/>
      <action name="update"/>
      <action name="unselectAll"/>
    </transition>
    <transition event_class="MousePressEvent" event_variant="SelectPoint" target="movingPoint">
      <action name="update"/>
      <action name="initMove"/>
    </transition>
    <transition event_class="MousePressEvent" event_variant="DeletePoint" target="start">
      <action name="update"/>
      <action name="removePoint"/>
    </transition>
    <transition event_class="MousePressEvent" event_variant="DeletePoint2" target="start">
      <action name="update"/>
      <action name="removePoint"/>
    </transition>
  </state>
  <state name="movingPoint">
    <transition event_class="MouseMoveEvent" event_variant="MovePoint" target="movingPoint">
      <action name="update"/>
      <action name="movePoint"/>
    </transition>
    <transition event_class="MouseReleaseEvent" event_variant="EndMovingPoint" target="pointSelected">
      <action name="finishMovement"/>
    </transition>
  </state>
</statemachine>

<!--
State machine pattern for display interactions:
-Zooming
-Panning
-Scrolling through planes
-Adjusting the LevelWindow

For some interactions several transitions exists, which one is used can be determined by the configuration file.
If an event_variant is not declared in the configuration file it is disabled.

For example scrolling can be triggered by Key-, Wheel- or MouseMove events, where the latter needs an extra state for scrolling.
So they are triggered by different event_variants, to choose which one is used, describe the desired event_variant in a config file
and omit the others. See DisplayConfig___ for examples and also for parameters for the interaction behaviour.


TODO Std move to abort interaction of scroll/pan/zoom
-->
<statemachine>

    <state name="start" startstate="true" >
        <transition event_class="InteractionPositionEvent" event_variant="StartSelectPosition" target="selectPosition">
            <action name="selectPosition"/>
        </transition>
        <transition event_class="InteractionPositionEvent" event_variant="StartMove" target="move">
            <action name="initMove"/>
        </transition>
        <transition event_class="InteractionPositionEvent" event_variant="StartZoom" target="zoom">
            <action name="initZoom"/>
        </transition>

        <transition event_class="InteractionEvent" event_variant="PlaneUP" target="start">
            <action name="ScrollOneUp"/>
        </transition>
        <transition event_class="InteractionEvent" event_variant="PlaneDown" target="start">
            <action name="ScrollOneDown"/>
        </transition>

        <transition event_class="InteractionEvent" event_variant="SelectPreviousTimeStep" target="start">
            <action name="selectPreviousTimeStep"/>
        </transition>
        <transition event_class="InteractionEvent" event_variant="SelectNextTimeStep" target="start">
            <action name="selectNextTimeStep"/>
        </transition>

        <transition event_class="InteractionKeyEvent" event_variant="AxialWindowLayout" target="start">
            <action name="setWindowLayoutToAxial"/>
        </transition>
        <transition event_class="InteractionKeyEvent" event_variant="SagittalWindowLayout" target="start">
            <action name="setWindowLayoutToSagittal"/>
        </transition>
        <transition event_class="InteractionKeyEvent" event_variant="CoronalWindowLayout" target="start">
            <action name="setWindowLayoutToCoronal"/>
        </transition>
        <transition event_class="InteractionKeyEvent" event_variant="3DWindowLayout" target="start">
            <action name="setWindowLayoutTo3D"/>
        </transition>
        <transition event_class="InteractionKeyEvent" event_variant="MultiWindowLayout" target="start">
            <action name="setWindowLayoutToMulti"/>
        </transition>
        <transition event_class="MouseDoubleClickEvent" event_variant="ToggleMultiWindowLayout" target="start">
            <action name="toggleMultiWindowLayout"/>
        </transition>

        <transition event_class="InteractionKeyEvent" event_variant="ToggleCursorVisibility" target="start">
            <action name="toggleCursorVisibility"/>
        </transition>
    </state>

    <state name="selectPosition">
        <transition event_class="InteractionPositionEvent" event_variant="SelectPosition" target="selectPosition">
            <action name="selectPosition"/>
        </transition>
        <transition event_class="InteractionPositionEvent" event_variant="EndSelectPosition" target="start"/>
    </state>

    <state name="move">
        <transition event_class="InteractionPositionEvent" event_variant="Moving" target="move">
            <action name="move"/>
        </transition>
        <transition event_class="InteractionPositionEvent" event_variant="EndMoving" target="start"/>
    </state>

    <state name="zoom">
        <transition event_class="InteractionPositionEvent" event_variant="Zooming" target="zoom">
            <action name="zoom"/>
        </transition>
        <transition event_class="InteractionPositionEvent" event_variant="EndZooming" target="start"/>
    </state>

</statemachine>
